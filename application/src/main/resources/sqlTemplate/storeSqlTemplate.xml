<?xml version="1.0" encoding="UTF-8"?>
<sqls catalog="storeCatalog">
    <sql key = "searchProfile" dmlType = "select" remark="">
        <![CDATA[
            SELECT id, profile_name, create_by, create_dt, update_by, update_dt FROM profile where 1 = 1
            <#if status??> and status = ?</#if>
        ]]>
    </sql>

    <sql key = "receiveSqlStore" dmlType = "select" remark="">
        <![CDATA[
            SELECT id, execute_sql, execute_result, profile_id, create_by, create_dt, update_by, update_dt, status, run_count, cause
            FROM store where 1 = 1
            <#if execute_result??> and execute_result = ?</#if>
            <#if create_dt??> and to_days(create_dt) = to_days(?)</#if>
        ]]>
    </sql>

    <sql key = "createStore" dmlType = "insert" remark="">
        <![CDATA[
            INSERT INTO store (execute_sql, execute_result, profile_id, create_by, create_dt, update_by, update_dt, status)
            VALUES (?, ?, ?, ?, ?, ?, ?, ?)
        ]]>
    </sql>

    <sql key = "updateStore" dmlType = "update" remark="">
        <![CDATA[
            UPDATE store SET execute_sql=?, execute_result=?, profile_id=?, update_by=?, update_dt=?, status=?, run_count=?, cause=? WHERE id=?;
        ]]>
    </sql>

    <sql key = "selectSqlStoreById" dmlType = "select" remark="">
        <![CDATA[
            SELECT id, execute_sql, execute_result, profile_id, create_by, create_dt, update_by, update_dt, run_count, cause, status FROM store where id = ?
        ]]>
    </sql>

    <sql key = "runCountStore" dmlType = "select" remark="">
        <![CDATA[
            select run_count  from store where id = ?
        ]]>
    </sql>

    <sql key = "changeRunStatus" dmlType = "update" remark="">
        <![CDATA[
            UPDATE store SET execute_result = ?, run_count = ? where id = ?
        ]]>
    </sql>

    <sql key = "updateCause" dmlType = "update" remark="">
        <![CDATA[
            UPDATE store SET cause = ? where id = ?
        ]]>
    </sql>
</sqls>


